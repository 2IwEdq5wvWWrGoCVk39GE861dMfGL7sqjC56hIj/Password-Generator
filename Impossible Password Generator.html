<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omniscript Entropy Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at top left, #070a13, #0f172a);
            min-height: 100vh;
            color: #e9ecef;
        }

        .mono { font-family: 'JetBrains+Mono', monospace; }
        
        .glass {
            background: rgba(255, 255, 255, 0.02);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .gradient-text {
            background: linear-gradient(90deg, #f472b6, #38bdf8, #818cf8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        input[type=range] {
            -webkit-appearance: none;
            background: rgba(255, 255, 255, 0.05);
            height: 6px;
            border-radius: 5px;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 18px;
            width: 18px;
            border-radius: 50%;
            background: #f472b6;
            cursor: pointer;
            box-shadow: 0 0 15px rgba(244, 114, 182, 0.4);
        }
        
        #password-display {
            scrollbar-width: thin;
            scrollbar-color: #f472b6 rgba(0,0,0,0.2);
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        #password-display::-webkit-scrollbar { width: 6px; }
        #password-display::-webkit-scrollbar-thumb { background-color: #f472b6; border-radius: 10px; }
        
        .void-btn {
            background: linear-gradient(45deg, #1e293b, #475569);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .security-badge {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div class="max-w-4xl w-full glass rounded-3xl p-6 md:p-10 shadow-2xl border-t border-white/20">
        <header class="mb-8 text-center md:text-left">
            <h1 class="text-4xl font-black gradient-text mb-2 tracking-tighter uppercase">Omniscript Lab v3.5</h1>
            <p class="text-gray-400 text-sm italic">"Hunt for the mystery boxes in the digital void."</p>
        </header>

        <!-- Output Section -->
        <div class="relative group mb-4">
            <div id="password-display" class="w-full bg-black/60 border border-white/5 rounded-2xl text-2xl mono text-left min-h-[220px] max-h-[400px] overflow-y-auto text-pink-300 p-8 leading-relaxed shadow-inner">
                System ready.
            </div>
            <div class="absolute right-4 bottom-4 flex gap-2">
                 <button onclick="copyPassword()" id="copy-btn" class="opacity-0 group-hover:opacity-100 transition-opacity bg-white/10 hover:bg-white/20 backdrop-blur-md px-6 py-2 rounded-xl text-xs font-bold uppercase tracking-wider border border-white/10 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>
                    Copy String
                </button>
            </div>
        </div>

        <!-- Security Analysis Panel -->
        <div class="mb-8 p-5 bg-white/5 border border-white/10 rounded-2xl space-y-3">
            <div class="flex justify-between items-center">
                <span class="text-[10px] font-bold uppercase tracking-widest text-gray-400">Security Rating</span>
                <span id="security-rating" class="text-sm font-black uppercase tracking-tighter px-3 py-1 rounded-full security-badge">Calculating...</span>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 pt-2 border-t border-white/5">
                <div>
                    <span class="text-[10px] text-gray-500 uppercase font-bold tracking-widest block">Time to Brute Force</span>
                    <span id="brute-force-time" class="text-xs mono text-sky-400 font-bold">---</span>
                </div>
                <div>
                    <span class="text-[10px] text-gray-500 uppercase font-bold tracking-widest block">Guessing Chance</span>
                    <span id="guess-chance" class="text-xs mono text-pink-400 font-bold truncate block">---</span>
                </div>
            </div>
        </div>

        <!-- Metrics -->
        <div class="mb-8 grid grid-cols-2 gap-4">
            <div class="bg-white/5 p-4 rounded-xl border border-white/5">
                <span class="text-[10px] font-bold uppercase tracking-widest text-gray-500 block mb-1">Target Pool Size</span>
                <div id="pool-count" class="text-xl font-bold text-sky-400">---</div>
            </div>
            <div class="bg-white/5 p-4 rounded-xl border border-white/5 text-right">
                <span class="text-[10px] font-bold uppercase tracking-widest text-gray-500 block mb-1">Total Entropy</span>
                <div id="entropy-bits" class="text-xl font-bold text-pink-400">0 bits</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-4">
                <div class="space-y-4">
                    <div class="flex justify-between items-center">
                        <label class="text-sm font-medium text-gray-300">Length (Max 10k)</label>
                        <input type="number" id="length-num" value="48" min="1" max="10000" class="w-24 bg-pink-500/10 border border-pink-500/30 text-pink-400 px-2 py-1 rounded text-sm font-bold focus:outline-none focus:border-pink-400">
                    </div>
                    <input type="range" id="length" min="1" max="10000" value="48" class="w-full cursor-pointer">
                </div>
                
                <div class="grid grid-cols-1 gap-3">
                    <button id="generate-btn" class="w-full py-4 bg-gradient-to-r from-pink-600 via-purple-600 to-indigo-600 hover:brightness-110 active:scale-[0.98] transition-all rounded-xl font-black text-lg tracking-[0.2em] shadow-xl">
                        STANDARD RANDOM
                    </button>
                    <button id="void-btn" class="w-full py-4 void-btn hover:brightness-110 active:scale-[0.98] transition-all rounded-xl font-black text-lg tracking-[0.2em] shadow-xl">
                        VOID EXPLORER (BOXES)
                    </button>
                </div>
            </div>

            <div class="space-y-4 bg-white/5 p-6 rounded-2xl border border-white/10">
                <h3 class="text-[10px] font-bold uppercase tracking-widest text-gray-400 mb-2">Universe Filter</h3>
                
                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="radio" name="scope" id="safe-mode" checked class="sr-only peer">
                        <div class="w-10 h-6 bg-gray-700 rounded-full peer-checked:bg-pink-500 transition-colors"></div>
                        <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-4"></div>
                    </div>
                    <div>
                        <span class="text-sm text-pink-100 font-bold block">Assigned Chars (154k)</span>
                    </div>
                </label>

                <label class="flex items-center space-x-3 cursor-pointer group">
                    <div class="relative">
                        <input type="radio" name="scope" id="omni-mode" class="sr-only peer">
                        <div class="w-10 h-6 bg-gray-700 rounded-full peer-checked:bg-purple-500 transition-colors"></div>
                        <div class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-4"></div>
                    </div>
                    <div>
                        <span class="text-sm text-purple-100 font-bold block">Absolute Raw (1.1M)</span>
                    </div>
                </label>

                <p class="text-[9px] text-gray-400 mt-4 border-t border-white/10 pt-4 leading-tight">
                    <span class="text-sky-400 font-bold">VOID EXPLORER:</span> This mode ignores all known letters and symbols. It only picks from "Unassigned" slots, which creates the "question mark boxes" ($\square$) because your computer has no image to show for them.
                </p>
            </div>
        </div>

        <div id="toast" class="fixed bottom-8 left-1/2 -translate-x-1/2 bg-white text-black px-8 py-3 rounded-full font-bold text-sm shadow-2xl opacity-0 transition-all transform translate-y-4 pointer-events-none z-50">
            String Captured!
        </div>
    </div>

    <script>
        const display = document.getElementById('password-display');
        const lengthSlider = document.getElementById('length');
        const lengthInput = document.getElementById('length-num');
        const entropyText = document.getElementById('entropy-bits');
        const poolText = document.getElementById('pool-count');
        const ratingBadge = document.getElementById('security-rating');
        const timeText = document.getElementById('brute-force-time');
        const guessChanceText = document.getElementById('guess-chance');

        lengthSlider.addEventListener('input', (e) => {
            lengthInput.value = e.target.value;
            generate();
        });

        lengthInput.addEventListener('input', (e) => {
            let val = parseInt(e.target.value);
            if (isNaN(val)) val = 1;
            if (val > 10000) val = 10000;
            lengthSlider.value = val;
            generate();
        });

        function getSecureRandomInt(limit) {
            const maxUint32 = 0xFFFFFFFF;
            const range = maxUint32 - (maxUint32 % limit);
            let randomValue;
            do {
                randomValue = window.crypto.getRandomValues(new Uint32Array(1))[0];
            } while (randomValue >= range);
            return randomValue % limit;
        }

        function updateSecurityAnalysis(entropy, length, poolSize) {
            // Rating logic
            let rating = "Very Easy";
            let color = "bg-red-500 text-white";

            if (entropy > 50000) {
                rating = "Universe-Defying Impossible";
                color = "bg-indigo-600 text-white animate-pulse shadow-[0_0_15px_rgba(79,70,229,0.5)]";
            } else if (entropy > 5000) {
                rating = "Galactic Impossible";
                color = "bg-purple-600 text-white";
            } else if (entropy > 500) {
                rating = "Extremely Secure";
                color = "bg-pink-600 text-white";
            } else if (entropy > 128) {
                rating = "Very Strong";
                color = "bg-sky-600 text-white";
            } else if (entropy > 64) {
                rating = "Moderate";
                color = "bg-orange-500 text-white";
            }

            ratingBadge.innerText = rating;
            ratingBadge.className = `text-sm font-black uppercase tracking-tighter px-3 py-1 rounded-full security-badge ${color}`;

            // Brute Force Time (Assumes 1 trillion guesses per second)
            // log10(time_seconds) = log10(poolSize^length / 10^12)
            const log10Seconds = (length * Math.log10(poolSize)) - 12;
            
            if (log10Seconds < 0) {
                timeText.innerText = "< 1 Second";
            } else if (log10Seconds < 17) {
                // Within age of universe roughly
                timeText.innerText = "Thousands of Years";
            } else {
                timeText.innerText = `10^${Math.floor(log10Seconds)} Universe Lifetimes`;
            }

            // Guessing Chance 1/X
            // Using BigInt for visual representation or Scientific notation
            const totalCombsLog10 = length * Math.log10(poolSize);
            guessChanceText.innerText = `1 in 10^${Math.floor(totalCombsLog10)}`;
        }

        function generate(mode = 'standard') {
            const length = parseInt(lengthInput.value);
            const useOmni = document.getElementById('omni-mode').checked;
            
            let password = "";
            // Void mode targets the unassigned planes (0x20000 to 0x10FFFF)
            // Pool size for math purposes:
            let mathPoolSize = useOmni ? 1114112 : 154998;
            if (mode === 'void') mathPoolSize = 978943; // Approx unassigned slots

            poolText.innerText = mode === 'void' ? "Void Slots (Unassigned)" : mathPoolSize.toLocaleString();

            if (mode === 'void') {
                for (let i = 0; i < length; i++) {
                    let cp = 0x20000 + getSecureRandomInt(0x10FFFF - 0x20000);
                    try {
                        password += String.fromCodePoint(cp);
                    } catch(e) { i--; }
                }
            } else {
                for (let i = 0; i < length; i++) {
                    let cp = getSecureRandomInt(mathPoolSize);
                    if (cp >= 0xD800 && cp <= 0xDFFF) cp = (cp + 0x0800) % mathPoolSize;
                    try {
                        password += String.fromCodePoint(cp);
                    } catch(e) { i--; }
                }
            }

            display.innerText = password;
            const entropy = Math.floor(length * Math.log2(mathPoolSize));
            entropyText.innerText = `${entropy.toLocaleString()} bits`;
            
            updateSecurityAnalysis(entropy, length, mathPoolSize);
        }

        function copyPassword() {
            const text = display.innerText;
            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);

            const toast = document.getElementById('toast');
            toast.style.opacity = '1';
            toast.style.transform = 'translate(-50%, 0)';
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, 1rem)';
            }, 2000);
        }

        document.getElementById('generate-btn').addEventListener('click', () => generate('standard'));
        document.getElementById('void-btn').addEventListener('click', () => generate('void'));
        document.querySelectorAll('input[name="scope"]').forEach(radio => {
            radio.addEventListener('change', () => generate('standard'));
        });

        window.onload = () => generate('standard');
    </script>
</body>
</html>